#!/bin/bash

ip=$( \
  defaults read ~/Library/Preferences/com.apple.HIToolbox.plist AppleSelectedInputSources
)
DISPLAY=''
  DISPLAY="ABC Extended"
if [[ "$ip" =~ "Japanese" ]]; then 
  DISPLAY="Hiragana"
fi

if [ "$OPTIND" = 1 ]; then
  while getopts :his OPT
  do
    case $OPT in
      h)
        ;;
      i)
        DISPLAY=$( \
          echo ${DISPLAY} \
          | sed -e s/ABC\ Extended/ðŸ‡ºðŸ‡¸/g \
          | sed -e s/Hiragana/ðŸ‡¯ðŸ‡µ/ \
          )
        ;;
      s)
        DISPLAY=$( \
          echo ${DISPLAY} \
          )
        ;;
      f)
        DISPLAY=$( \
          echo ${OPTARG} \
          | sed -e s/%n/$(num_of_files)/g \
          | sed -e s/%s/$(garbage_size)/g \
          )
        ;;
      *)
        ;;
    esac
  done
fi
shift `expr ${OPTIND} - 1`

echo $DISPLAY
