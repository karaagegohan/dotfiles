#!/bin/bash

ip=$(\
  ifconfig \
  | grep inet[^6] \
  | sed 's/.*inet[^6][^0-9]*\([0-9.]*\)[^0-9]*.*/\1/' \
  | grep -v '^127\.' \
  | grep -v '^10\.' \
  | grep -v '^172\.\(1[6-9]\|2[0-9]\|3[01]\)\.' \
  | grep -v '^192\.168\.' \
  | grep -v '^169\.254\.' \
  )
echo $ip

