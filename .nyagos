-- This is a sample .nyagos written with Lua.
-- Edit and put it on %USERPROFILE%, %HOME% or the same folder with nyagos.exe

-- Simple Prompt for CMD.EXE
nyagos.env.prompt='$L'.. nyagos.getenv('COMPUTERNAME') .. ':$P$G$_$$$s'

-- Coloring Prompt for NYAGOS.exe
nyagos.prompt = function(this)
    local wd = nyagos.getwd()
    local env = nyagos.env
    local home = env.home or env.userprofile
    local home_len = home:len()
    if wd:sub(1,home_len) == home then
        wd = "~" .. wd:sub(home_len+1)
    end
    local title = wd .. " - NYAGOS"
    return nyagos.default_prompt('$e[40;36;1m'..this..'$e[37;1m',title)
end

set{
    PROMPT="$_\x1b[40m[$P]\x1b[0m$_\x1b[39m$$\x1b[0m$s"
}

nyagos.bindkey("C_R",
    function(this)
        local path = nyagos.getenv("APPDATA") .. '\\NYAOS_ORG\\nyagos.history'
        local result = nyagos.eval('type ' .. path .. ' | peco')
        this:call("CLEAR_SCREEN")
        return result
    end)

alias{
    lua_e=function(args) assert(load(args[1]))() end,
    ["for"]='%COMSPEC% /c "@set PROMPT=$G & @for $*"',
    g='git',
    v='gvim $1 &',
    ls='ls -l',
    la='ls -la',
}

-- vim:set ft=lua: --
